# U-54: 암호화되지 않는 FTP 서비스 비활성화

**분류**: 01_unix

**중요도**: 중

---

01. Unix 서버

UNIX > 3. 서비스 관리

## 개요

### 점검 내용

암호화되지 않은 FTP 서비스 비활성화 여부 점검

### 점검 목적

암호화되지 않은 FTP 서비스를 비활성화함으로써 계정 및 중요 정보 유출 방지하기 위함

### 보안 위협

암호화되지 않은 FTP 서비스를 사용할 경우, 데이터가 평문으로 전송되어 비인가자가 스니핑을 통해 계정 및 중요 정보를 외부로 유출할 위험이 존재함

### 참고

!!! info "기반시설 시스템에서 FTP 서비스의 이용은 원칙적으로 금지하나, 불가피하게 사용 시 SFTP 사용 권고"

!!! info "암호화되지 않은 FTP 서비스 종류"
    FTP

!!! info "암호화되어 있는 FTP 서비스 종류"
    SFTP, FTP over SSH(Secure FTP), FTPS

## 점검 대상 및 판단 기준

### 대상

SOLARIS, LINUX, AIX, HP-UX 등

### 판단 기준

**✅ 양호**: 암호화되지 않은 FTP 서비스가 비활성화된 경우

**❌ 취약**: 암호화되지 않은 FTP 서비스가 활성화된 경우

## 조치 방법

암호화되지 않은 FTP 서비스 중지 및 비활성화 설정

### 조치 시 영향

일반적인 경우 영향 없음

## 점검 및 조치 사례

### SOLARIS

**[vsFTP]**

**Step 1) FTP 서비스 활성화 여부 확인**

# svcs -a | grep vsftpd

**Step 2) FTP 서비스 비활성화**

# svcadm disable vsftpd

**[ProFTP]**

**Step 1) FTP 서비스 활성화 여부 확인**

# svcs -a | grep proftpd

**[vsFTP – ftpusers]**

**Step 1) userlist_enable 설정값 확인**

# cat /etc/vsftpd.conf | grep userlist_enable 또는 # cat /etc/vsftpd/vsftpd.conf | grep userlist_enable” userlist_enable = NO

**Step 2) 파일 소유자 및 권한 확인**

# ls -l /etc/vsftpd.ftpusers 또는 # ls -l /etc/vsftpd/ftpusers

**Step 3) 접근 제한 설정 확인**

# cat /etc/vsftpd.ftpusers 또는 # cat /etc/vsftpd/ftpusers

**Step 4) 파일 소유자를 root로 변경**

# chown root /etc/vsftpd.ftpusers 또는 # chown root /etc/vsftpd/ftpuser

**Step 5) 파일 권한을 640으로 변경**

# chmod 640 /etc/vsftpd.ftpusers 또는 # chmod 640 /etc/vsftpd/ftpusers

**Step 6) /etc/vsftpd.ftpusers 또는 /etc/vsftpd/ftpusers 파일에 FTP 서비스에 접근을 차단할 사용자 설정**

**[vsFTP – user_list]**

**Step 1) userlist_enable 설정값 확인**

# cat /etc/vsftpd.conf | grep userlist_enable 또는 # cat /etc/vsftpd/vsftpd.conf | grep userlist_enable userlist_enable = YES

**Step 2) 파일 소유자 및 권한 확인**

# ls -l /etc/vsftpd.user_list 또는 # ls -l /etc/vsftpd/user_list

**Step 3) 접근 제한 설정 확인**

# cat /etc/vsftpd.user_list 또는 # cat /etc/vsftpd/user_list

**Step 4) 파일 소유자를 root로 변경**

# chown root /etc/vsftpd.user_list 또는 # chown root /etc/vsftpd/user_list

**Step 5) 파일 권한을 640으로 변경**

# chmod 640 /etc/vsftpd.user_list 또는 # chmod 640 /etc/vsftpd/user_list

**Step 6) /etc(/vsftpd)/vsftpd.conf 파일의 userlist_deny 옵션 설정**

user_list에 등록된 사용자만 접속 허가 : userlist_deny=no user_list에 등록된 사용자 접속 차단 : userlist_deny=yes

**Step 7) /etc(/vsftpd)/vsftpd.conf 파일에 FTP 서비스에 접근을 허가/차단할 사용자 설정**

01. Unix 서버

**[ProFTP – ftpusers]**

**Step 1) UseFtpUsers 설정 확인**

# cat /etc/proftpd.conf | grep UseFtpUsers 또는 # cat /etc/proftpd/proftpd.conf | grep UseFtpUsers UseFtpUsers on (기본 설정 : on)

**Step 2) 파일 소유자 및 권한 확인**

# ls -l /etc/ftpusers 또는 # ls -l /etc/ftpd/ftpusers

**Step 3) 접근 제한 설정 확인**

# cat /etc/ftpusers 또는 # cat /etc/ftpd/ftpusers

**Step 4) 파일 소유자를 root로 변경**

# chown root /etc/ftpusers 또는 # chown root /etc/ftpd/ftpusers

**Step 5) 파일 권한을 640으로 변경**

# chmod 640 /etc/ftpusers 또는 # chmod 640 /etc/ftpd/ftpusers

**Step 6) /etc/(/ftpd)ftpusers 파일에 FTP 서비스에 접근을 차단할 사용자 설정**

**[ProFTP – proftpd.conf]**

**Step 1) UseFtpUsers 설정 확인**

# cat /etc/proftpd.conf | grep UseFtpUsers 또는 # cat /etc/proftpd/proftpd.conf | grep UseFtpUsers UseFtpUsers off

**Step 2) 파일 소유자 및 권한 확인**

# cat /etc/proftpd.conf 또는 # cat /etc/proftpd/proftpd.conf

**Step 3) 접근 제한 설정 확인**

# sed -n ‘/<Limit LOGIN>/, /<\/Limit>/p’ /etc/proftpd.conf 또는 # sed -n ‘/<Limit LOGIN>/, /<\/Limit>/p’ /etc/proftpd/proftpd.conf”

**Step 4) 파일 소유자를 root로 변경**

# chown root /etc/proftpd.conf 또는 # chown root /etc/proftpd/proftpd.conf

**Step 5) 파일 권한을 640으로 변경**

# chmod 640 /etc/proftpd.conf 또는 # chmod 640 /etc/proftpd/proftpd.conf

**Step 6) /etc(/proftpd)/proftpd.conf 파일 수정 및 삽입**

<Limit LOGIN> Order Deny,Allow AllowUser <사용자 이름> 또는 Allow from <IP주소> DenyUser <사용자 이름> 또는 Deny from <IP주소> </Limit>

**Step 7) ProFTP 서비스 재시작**

!!! info "Order"
    먼저 정의된 설정 우선 적용

