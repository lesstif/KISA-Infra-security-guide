# U-44: tftp, talk 서비스 비활성화

**분류**: 01_unix

**중요도**: 상

---

## 개요

### 점검 내용

tftp, talk, ntalk 서비스의 활성화 여부 점검

### 점검 목적

안전하지 않거나 불필요한 서비스를 제거함으로써 시스템 보안성 및 리소스의 효율적 운용하기 위함

### 보안 위협

사용하지 않는 서비스나 취약점이 발표된 서비스 운용 시 공격 시도 가능한 위험이 존재함

### 참고

!!! info "tftp"
    파일 전송을 위한 프로토콜로서 FTP 서비스보다 구조가 단순하며 적은 양의 데이트를 보낼 때 사용됨. 주로 원격의 부팅 파일을 불러오거나 설치 프로세스를 시작하기 위한 초기 데이터 호출 용도로 사용. 서비스 사용 시 인증 절차가 없어 보안에 취약함

!!! info "talk"
    사용자가 시스템에 원격으로 연결하여 다른 시스템에 로그인하고 있는 사용자와 대화 세션을 시작할 수 있음

!!! info "ntalk"
    서로 다른 시스템 간에 채팅을 가능하게 하는 서비스

## 점검 대상 및 판단 기준

### 대상

SOLARIS, LINUX, AIX, HP-UX 등

### 판단 기준

**✅ 양호**: tftp, talk, ntalk 서비스가 비활성화된 경우

**❌ 취약**: tftp, talk, ntalk 서비스가 활성화된 경우

## 조치 방법

불필요한 tftp, talk, ntalk 서비스 비활성화 설정

### 조치 시 영향

일반적인 경우 영향 없음

## 점검 및 조치 사례

### SOLARIS

1. **tftp, talk 서비스 활성화 여부 확인**

    ```bash
    # inetadm | egrep “tftp|talk”
    ```

2. **불필요한 서비스 데몬 중지**

    ```bash
    # inetadm -d <서비스 데몬명>
    ```

### LINUX

#### inetd

1. **`/etc/inetd.conf` 파일 내 tftp, talk, ntalk 서비스 활성화 여부 확인**

    ```bash
    # cat /etc/inetd.conf
    ```

2. **`/etc/inetd.conf` 파일 수정(주석 처리)**

    ```bash
    #tftp   dgram  udp  nobody   /usr/sbin/tftpd  tftpd -n
    #talk   stream  tcp  wait  root    /usr/sbin/talkd  talkd
    #ntalk  dgram  udp  wait  root    /usr/sbin/talkd  talkd
    ```

3. **inetd 서비스 재시작**

    ```bash
    # systemctl restart inetd
    ```

#### xinetd

1. **`/etc/xinetd.d/` 디렉터리 내 존재하는 tftp, talk, ntalk 파일에 대해 서비스 활성화 여부 확인**

    ```bash
    예시) service tftp{ disable         = no ... }
    ```

2. **`/etc/xinetd.d/` 디렉터리 내 존재하는 tftp, talk, ntalk 파일에 대한 설정값 변경**

    * `disable = yes`

3. **설정 적용 및 서비스 재시작**

    ```bash
    # systemctl restart xinetd
    ```

#### systemd

1. **서비스 활성화 여부 확인**

    ```bash
    # systemctl list-units --type=service | grep -E “tftp|talk|ntalk”
    ```

2. **tftp, talk, ntalk 서비스 중지**

    ```bash
    # systemctl stop <서비스명>
    ```

3. **tftp, talk, ntalk 서비스 비활성화**

    ```bash
    # systemctl disable <서비스명>
    ```

!!! info "참고"
    Redhat 계열 리눅스는 RHEL 7 버전부터 talk 패키지가 제거되었음

### AIX, HP-UX

1. **서비스 활성화 여부 확인**

    ```bash
    # /etc/inetd.conf | grep -E “tftp|talk|ntalk”
    ```

2. **`/etc/inetd.conf` 파일 수정(주석 처리)**

    ```bash
    #tftp    dgram   udp6    SRC    nobody  /usr/sbin/tftpd       tftpd -n
    #talk    dgram   udp     wait    root     /usr/sbin/talkd       talkd
    #ntalk   dgram   udp     wait    root     /usr/sbin/talkd       talkd
    ```

3. **inetd 설정 적용**

    * **AIX**
    ```bash
    # refresh –s inetd
    ```

    * **HP-UX**
    ```bash
    # inetd –c
    ```

---

#### 서비스 설명

| 서비스 | 포트 | 설명 |
|---|---|---|
| TFTP | 69 | 파일 전송을 위한 프로토콜로써 FTP 서비스보다 구조가 단순하며 적은 양의 데이터를 보낼 때 사용됨. 주로 원격의 부팅 파일을 불러오거나 설치 프로세스를 시작하기 위한 초기 데이터 호출 용도로 사용함. 서비스 사용 시 인증 절차가 없어 보안에 취약함 |
| TALK | 517 | 사용자가 시스템에 원격으로 연결하여 다른 시스템에 로그인하고 있는 사용자와 대화 세션을 시작할 수 있음 |
| NTALK | 518 | 서로 다른 시스템과 채팅을 가능하게 하는 서비스 |

