# N-13: 로깅 버퍼 크기 설정

**분류**: Network Equipment

**중요도**: 중

---

## 개요

### 점검 내용

버퍼 메모리의 크기를 어느 정도로 설정하고 있는지 점검

### 점검 목적

장비 성능을 고려하여 최대 용량에 가깝도록 버퍼 크기를 설정하도록 함

### 보안 위협

버퍼 메모리의 용량을 초과하는 로그가 저장될 경우 로그 정보를 잃게 되어 침해사고 발생 시 침입 흔적을 알 수 없는 상황이 발생함

### 참고

!!! info "버퍼 메모리"
    일반적으로 주기억 장치와 중앙 처리 장치 사이의 명령이나 데이터를 일시 유지하는데 사용되는 고속의 기억 장치. 버퍼 메모리는 주기억 장치보다 메모리 용량은 적지만 고속의 기억 소자를 사용함으로써 주기억 장치와 중앙 처리 사이의 정보의 흐름을 원활하게 함. 버퍼 메모리를 달리 로컬 메모리 혹은 캐시(cache)라고도 함

!!! info "참고"
    *   기본적으로 로그는 파일이 아닌 버퍼 메모리에 저장됨
    *   최대 버퍼 크기는 65,500byte이며 버퍼 용량을 높게 설정하면 패킷 전달이 안 되는 경우가 발생함.
    *   일반적으로 16Kbyte에서 32Kbyte의 크기가 적당하며, 최대 용량이 16Kbyte에 못 미치는 장비의 경우 장비 성능을 고려하여 최대 용량에 가깝게 설정하는 것을 권고함

## 점검 대상 및 판단 기준

### 대상

Cisco, Piolink 등

### 판단 기준

**✅ 양호**: 저장되는 로그 데이터보다 버퍼 용량이 큰 경우

**❌ 취약**: 저장되는 로그 데이터보다 버퍼 용량이 작은 경우

## 조치 방법

로그에 대한 정보를 확인하여 장비 성능을 고려한 최대 버퍼 크기를 설정

### 조치 시 영향

버퍼 크기가 장비 성능에 비해 큰 경우 라우터의 성능에 영향을 줌

## 점검 및 조치 사례

### Cisco IOS

1.  **버퍼 메모리 설정 확인**
    *   로그에 대한 정보를 확인 (메모리(RAM)에 저장된 로그는 `show logging`으로 확인할 수 있고, `clear logging`을 실행하거나 RAM 에 저장된 로그는 전원 종료 시 삭제)
    ```bash
    Router> enable
    Router# show logging
    ```
2.  **버퍼 메모리 설정**
    ```bash
    Router# config terminal
    Router(config)# logging on (로그를 메모리에 백업)
    Router(config)# logging buffered 16000 (16KByte 할당)
    Router(config)# logging buffered information (severity 레벨 설정)
    ```

### Piolink PLOS

1.  **로그에 대한 정보를 확인**
    ```bash
    (config)# show logging
    ```
2.  **`logging buffer <size>` (설정 범위 1~1000KB, 기본설정 100KB)**
    ```bash
    (config)# logging buffer <size>
    (config)# logging priority <event> <level>
    ```

