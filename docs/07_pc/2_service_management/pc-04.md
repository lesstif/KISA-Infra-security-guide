# PC-04: 공유 폴더 제거

**분류**: PC

**중요도**: 상

---

## 개요

### 점검 내용

기본 공유 폴더(C$, D$, Admin$), 미사용 공유 폴더가 존재하는지 점검하고 공유 폴더를 사용하는 경우 공유 폴더 접근 권한에 “Everyone”이 존재하거나 접근을 위한 비밀번호 설정 여부 점검

### 점검 목적

사용하지 않는 불필요한 공유 폴더를 해제하거나 불가피하게 사용하고 있는 공유 폴더의 경우 비밀번호를 설정하는 등의 조치를 통해 인가된 사용자만 접근할 수 있게 함으로써 무분별한 접근을 제한하기 위함

### 보안 위협

*   시스템 기본 공유 폴더의 경우 기본 드라이브를 개방해놓고 사용하는 것과 같은 위험이 존재함 (예시 : 실행 창 -> `\\192.168.16.xxx\C$`로 C 드라이브 접근 가능)
*   접근 권한이 Everyone으로 설정된 공유 폴더는 정보 유출 및 악성코드 유포의 접점이 될 수 있는 위험이 존재함

### 참고

*   -

## 점검 대상 및 판단 기준

### 대상

Windows 10, Windows 11

### 판단 기준

**✅ 양호**: 불필요한 공유 폴더가 존재하지 않거나 공유 폴더에 접근 권한 및 비밀번호가 설정된 경우

**❌ 취약**: 불필요한 공유 폴더가 존재하거나 접근 권한 및 비밀번호 설정 없이 공유 폴더가 사용된 경우

## 조치 방법

*   공유 폴더 불필요 시 삭제
*   공유 폴더 필요하면 적절한 접근 권한 부여 및 비밀번호 설정
*   조치 후 “AutoShareWks”값 변경으로 자동 공유 방지

### 조치 시 영향

일반적인 경우 영향 없음

## 점검 및 조치 사례

### Windows 10, Windows 11

**[기본 공유 폴더 설정]**

**Step 1) 기본 공유 폴더 상태 확인 및 공유 중지**

시작 > 모든 앱> Windows Tools > 컴퓨터 관리 > 공유 폴더 > 공유 (시작 > 실행 > “fsmgmt.msc” 입력 > 공유)

**Step 2) 불필요한 공유 폴더 확인 > 해당 공유 폴더 우클릭 > 공유 중지(S)**

![공유 폴더 “공유 중지” 설정](../../images/07_pc/pc-005.jpg "공유 폴더 “공유 중지” 설정")

**Step 3) 시작 > 모든 앱 > Windows Tools > 레지스트리 편집기**

**Step 4) 레지스트리 경로로 이동**

`HKLM\SYSTEM\CurrentControlSet\Service\LanmanServer\Parameters`

**Step 5) 설정값 입력**

*   Value name: `AutoShareWks`
*   Data Type: `REG_DWORD`
*   Value: `0` (zero)
*   값이 없는 경우, 새로 만들기 > “AutoShareWks”를 추가하고 값을 “0”으로 입력

![“AutoShareWks” 레지스트리 값 0으로 설정](../../images/07_pc/pc-009.jpg "“AutoShareWks” 레지스트리 값 0으로 설정")

아래 그림과 같이 “AutoShareWks”를 입력하며, 이때 값은 기본값인 “0”으로 유지 또한, 방화벽과 라우터에서 135, 139(TCP/UDP) Port를 차단하여 보안성을 높일 수 있음

!!! info "기본 공유에 대한 조치 시 반드시 [기본 공유 삭제], [비활성화 레지스트리 값]을 모두 설정함"

**[일반 공유 폴더 설정]**

**Step 1) 일반 공유 폴더 확인 및 공유 중지**

시작 > 모든 앱 > Windows Tools > 컴퓨터 관리 > 공유 폴더 > 공유 (시작 > 실행 > “fsmgmt.msc” 입력 > 공유)

**Step 2) 불필요한 공유 폴더 확인 > 해당 공유 폴더 우클릭 > 공유 중지**

![공유 중지](../../images/07_pc/pc-005.jpg "공유 중지")

**Step 3) 일반 공유 폴더 필요한 시 권한 설정**

시작 > 모든 앱 Windows Tools > 컴퓨터 관리 > 공유 폴더 > 공유

**Step 4) 사용할 공유 폴더 확인 선택 후 우클릭 > 속성 > [공유] 탭 > [공유 사용 권한] 탭 “Everyone”으로 된 공유를 제거하고, 접근이 필요한 계정에만 적절한 권한 추가**

![공유 사용 권한 “Everyone” 제거](../../images/07_pc/pc-009.jpg "공유 사용 권한 “Everyone” 제거")

**[공유 폴더 접근 비밀번호 설정]**

**Step 1) 시작 > 설정 > 네트워크 및 인터넷 > 고급 네트워크 설정 > 고급 공유 설정 > 모든 네트워크**

**Step 2) “암호로 보호된 공유” 켬 설정**

**Step 3) 공유 폴더 접근 가능 여부 확인**

시작 > 모든 앱 > Windows Tools > 실행 > 공유 폴더 PC 계정명 또는, IP주소 입력 후 비밀번호 입력 팝업 확인

![공유 폴더 접근 가능 여부 확인](../../images/07_pc/pc-009.jpg "공유 폴더 접근 가능 여부 확인")

## 공유 폴더 설정 기준

1.  C$, D$, Admin$ 등의 기본 공유 폴더 제거
2.  기본 공유 폴더 제거 후 시스템 재부팅 시 “기본 공유 폴더가 자동으로 공유되는 것”을 방지하기 위해 해당 레지스트리의 “AutoShareWks” 값을 “0”으로 설정
3.  일반 공유 폴더 사용 시 공유 폴더 접근 권한에 “Everyone” 제거
4.  일반 공유 폴더 사용 시 접근이 필요한 계정에만 적절한 (읽기, 변경) 권한 설정
5.  일반 공유 폴더 사용 시 공유 폴더 접근을 위한 비밀번호 설정

